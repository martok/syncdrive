{% from "macros/general.twig" import timeago_element %}

<!-- Breadcrumbs -->
<div class="uk-clearfix">
    <ul class="uk-breadcrumb uk-float-left" id="browse-breadcrumbs">
        <li><a href="{{ files.base }}"><i uk-icon="server"></i></a></li>
        {% for segment in files.breadcrumbs %}
            <li><a href="{{ files.base }}/{{ segment.path }}">{{ segment.name }}</a></li>
        {% endfor %}
    </ul>
    {% if files.showing_deleted %}
        <a class="uk-button uk-button-default uk-button-small uk-float-right" href="?deleted=0"><i uk-icon="trash"></i>Hide deleted</a>
    {% else %}
        <a class="uk-button uk-button-default uk-button-small uk-float-right" href="?deleted=1"><i uk-icon="trash"></i>Show deleted</a>
    {% endif %}
</div>

<!-- Toolbar -->
<div id="file-actions" class="toolbar">
    <button class="uk-button uk-button-default" id="upload" {{ 'C' not in exports.CURRENT_PERMISSIONS ? 'disabled' }}><i uk-icon="upload"></i>Upload</button>
    <button class="uk-button uk-button-default" id="newfolder" {{ 'K' not in exports.CURRENT_PERMISSIONS ? 'disabled' }}><i uk-icon="folder"></i>New</button>
    <button class="uk-button uk-button-default" id="file-paste" {{ 'C' not in exports.CURRENT_PERMISSIONS ? 'disabled' }}><i uk-icon="pull"></i>Paste<span></span></button>
    <button class="uk-button uk-button-default" id="file-rename" disabled><i uk-icon="pencil"></i>Rename</button>
    <span id="selected-file-actions" class="toolbar-group"></span>
</div>
{% if 'C' in exports.CURRENT_PERMISSIONS or 'W' in exports.CURRENT_PERMISSIONS %}
    <div id="upload-drop" class="uk-text-center">
        <input id="fileUpload" type="file" multiple style="display:none">
        <i uk-icon="cloud-upload"></i>Upload files by dropping them here
    </div>
    <div id="upload-status" class="uk-grid-small uk-grid-match uk-child-width-1-3@s uk-child-width-1-4@m" uk-grid></div>
{% endif %}

<!-- Files -->
<table id="file-list-table" class="uk-table uk-table-hover uk-table-striped">
    <thead>
        <tr>
            <th>Name</th>
            <th class="uk-width-1-5">Modified</th>
            <th class="uk-width-1-6">Size</th>
            <th class="uk-width-1-6">Permissions</th>
        </tr>
    </thead>
    <tbody>
        {% for file in files.list %}
            <tr data-sortable-row="{{ file|json_encode }}" class="{{ file.deleted ? 'row-deleted' : '' }}">
                <td><i uk-icon="{{ file.icon }}"></i> <a href="{{ files.base }}/{{ file.path }}">{{ file.name }}</a>
                    {%- if file.isShared %} <i uk-icon="link"></i>{% endif -%}
                </td>
                <td>{{ timeago_element(file.modified) }}</td>
                <td>{% if not file.isFolder %}{{ file.size| filesize }}{% endif %}</td>
                <td>{{ file.perms }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>